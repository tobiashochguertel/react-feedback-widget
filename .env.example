# =============================================================================
# React Visual Feedback - Docker Deployment Configuration
# =============================================================================
# Copy this file to .env and configure for your environment.
# Do not commit .env files to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# General Configuration
# -----------------------------------------------------------------------------

# Environment: development | production
NODE_ENV=production

# Docker Registry (leave empty for local builds)
# DOCKER_REGISTRY=ghcr.io/your-org

# Image tag for all services
DOCKER_IMAGE_TAG=latest

# -----------------------------------------------------------------------------
# PostgreSQL Database
# -----------------------------------------------------------------------------

# Database credentials
POSTGRES_USER=feedback
POSTGRES_PASSWORD=change-me-in-production
POSTGRES_DB=feedback

# Connection string (used by feedback-server)
# For Docker Compose: use service name as host
DATABASE_URL=postgresql://feedback:change-me-in-production@postgres:5432/feedback

# PostgreSQL port (mapped to host)
POSTGRES_PORT=5432

# -----------------------------------------------------------------------------
# Feedback Server
# -----------------------------------------------------------------------------

# Server port
FEEDBACK_SERVER_PORT=3001

# Server host (0.0.0.0 for Docker)
FEEDBACK_SERVER_HOST=0.0.0.0

# API authentication (optional)
# FEEDBACK_API_KEY=your-api-key-here

# CORS allowed origins (comma-separated)
FEEDBACK_CORS_ORIGINS=http://localhost:3000,http://localhost:3002,http://localhost:5173

# File upload settings
FEEDBACK_UPLOAD_MAX_SIZE=10485760
FEEDBACK_UPLOAD_ALLOWED_TYPES=image/png,image/jpeg,image/gif,image/webp

# Storage path (inside container)
FEEDBACK_STORAGE_PATH=/app/data

# Run database migrations on startup
RUN_MIGRATIONS=true

# Logging level: debug | info | warn | error
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# Feedback Server WebUI
# -----------------------------------------------------------------------------

# WebUI port
WEBUI_PORT=5173

# API URL for WebUI to connect to feedback-server
# For Docker Compose: use service name
VITE_API_URL=http://feedback-server:3001

# Public API URL (for browser access)
VITE_PUBLIC_API_URL=http://localhost:3001

# -----------------------------------------------------------------------------
# Feedback Example (Next.js Demo App)
# -----------------------------------------------------------------------------

# Example app port
EXAMPLE_PORT=3002

# Next.js public environment variables
NEXT_PUBLIC_FEEDBACK_API_URL=http://localhost:3001
NEXT_PUBLIC_FEEDBACK_PROJECT_ID=demo-project

# -----------------------------------------------------------------------------
# Widget Configuration (used in example apps)
# -----------------------------------------------------------------------------

# Default project ID for feedback submissions
FEEDBACK_PROJECT_ID=my-project

# Widget theme: light | dark | system
FEEDBACK_WIDGET_THEME=system

# Widget position: bottom-right | bottom-left | top-right | top-left
FEEDBACK_WIDGET_POSITION=bottom-right

# -----------------------------------------------------------------------------
# Health Check Configuration
# -----------------------------------------------------------------------------

# Health check intervals (in seconds)
HEALTHCHECK_INTERVAL=30
HEALTHCHECK_TIMEOUT=10
HEALTHCHECK_RETRIES=3

# -----------------------------------------------------------------------------
# Resource Limits (for docker-compose.prod.yml)
# -----------------------------------------------------------------------------

# Memory limits
POSTGRES_MEMORY_LIMIT=512m
SERVER_MEMORY_LIMIT=256m
WEBUI_MEMORY_LIMIT=128m
EXAMPLE_MEMORY_LIMIT=256m

# CPU limits (in cores)
POSTGRES_CPU_LIMIT=1
SERVER_CPU_LIMIT=0.5
WEBUI_CPU_LIMIT=0.25
EXAMPLE_CPU_LIMIT=0.5

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------

# Docker logging driver: json-file | syslog | journald
DOCKER_LOG_DRIVER=json-file

# Maximum log file size
DOCKER_LOG_MAX_SIZE=10m

# Maximum number of log files
DOCKER_LOG_MAX_FILE=3

# -----------------------------------------------------------------------------
# Network Configuration
# -----------------------------------------------------------------------------

# Docker network name
DOCKER_NETWORK=feedback-network

# Enable external network access (true for production with reverse proxy)
DOCKER_NETWORK_EXTERNAL=false

# -----------------------------------------------------------------------------
# Volume Configuration
# -----------------------------------------------------------------------------

# Use named volumes (true) or bind mounts (false)
USE_NAMED_VOLUMES=true

# Bind mount paths (used when USE_NAMED_VOLUMES=false)
# POSTGRES_DATA_PATH=./data/postgres
# FEEDBACK_DATA_PATH=./data/feedback

# -----------------------------------------------------------------------------
# Development Overrides (for docker-compose.override.yml)
# -----------------------------------------------------------------------------

# Enable source code hot-reload volumes
DEV_HOT_RELOAD=true

# Faster health check intervals for development
DEV_HEALTHCHECK_INTERVAL=10

# Enable debug logging
DEV_DEBUG=true
